{"ast":null,"code":"var _jsxFileName = \"/Users/habeebsait/Apps/food_app/web/src/components/Navigation.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { supabase } from '../supabaseClient';\nimport Auth from './Auth';\nimport { generateMyRecipesUrl, getUsernameForUrl } from '../utils/urlUtils';\nimport './Navigation.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction Navigation() {\n  _s();\n  const [user, setUser] = useState(null);\n  const [userProfile, setUserProfile] = useState(null);\n  const [showAuth, setShowAuth] = useState(false);\n  const [menuOpen, setMenuOpen] = useState(false);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [searchResults, setSearchResults] = useState([]);\n  const [showSearchResults, setShowSearchResults] = useState(false);\n  const [searchLoading, setSearchLoading] = useState(false);\n  const menuRef = useRef(null);\n  const searchRef = useRef(null);\n  const navigate = useNavigate();\n  useEffect(() => {\n    // Get initial session\n    supabase.auth.getSession().then(({\n      data: {\n        session\n      }\n    }) => {\n      var _session$user;\n      setUser((_session$user = session === null || session === void 0 ? void 0 : session.user) !== null && _session$user !== void 0 ? _session$user : null);\n      if (session !== null && session !== void 0 && session.user) {\n        fetchUserProfile(session.user.id);\n      }\n    });\n\n    // Listen for auth changes\n    const {\n      data: {\n        subscription\n      }\n    } = supabase.auth.onAuthStateChange((event, session) => {\n      var _session$user2;\n      setUser((_session$user2 = session === null || session === void 0 ? void 0 : session.user) !== null && _session$user2 !== void 0 ? _session$user2 : null);\n      if (session !== null && session !== void 0 && session.user) {\n        fetchUserProfile(session.user.id);\n      } else {\n        setUserProfile(null);\n      }\n    });\n\n    // Listen for global event to open auth modal (triggered from HomePage)\n    const openAuthHandler = () => setShowAuth(true);\n    window.addEventListener('openAuth', openAuthHandler);\n    return () => {\n      subscription === null || subscription === void 0 ? void 0 : subscription.unsubscribe();\n      window.removeEventListener('openAuth', openAuthHandler);\n    };\n  }, []);\n\n  // Close menu and search results on outside click\n  useEffect(() => {\n    function handleClickOutside(e) {\n      if (menuRef.current && !menuRef.current.contains(e.target)) {\n        setMenuOpen(false);\n      }\n      if (searchRef.current && !searchRef.current.contains(e.target)) {\n        setShowSearchResults(false);\n      }\n    }\n    if (menuOpen || showSearchResults) {\n      document.addEventListener('mousedown', handleClickOutside);\n    }\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, [menuOpen, showSearchResults]);\n  const fetchUserProfile = async userId => {\n    try {\n      const {\n        data,\n        error\n      } = await supabase.from('profiles').select('username, full_name, avatar_url').eq('id', userId).single();\n      if (error && error.code !== 'PGRST116') {\n        console.error('Error fetching profile:', error);\n        return;\n      }\n      setUserProfile(data);\n    } catch (error) {\n      console.error('Error fetching profile:', error);\n    }\n  };\n  const handleSignOut = async () => {\n    try {\n      await supabase.auth.signOut();\n      setMenuOpen(false);\n      navigate('/');\n    } catch (error) {\n      console.error('Error signing out:', error);\n    }\n  };\n  const getDisplayName = () => {\n    return (userProfile === null || userProfile === void 0 ? void 0 : userProfile.full_name) || (userProfile === null || userProfile === void 0 ? void 0 : userProfile.username) || (user === null || user === void 0 ? void 0 : user.email) || 'User';\n  };\n  const getAvatarInitials = () => {\n    const name = getDisplayName();\n    const parts = name.split(' ');\n    if (parts.length >= 2) {\n      return (parts[0][0] + parts[1][0]).toUpperCase();\n    }\n    return name.substring(0, 2).toUpperCase();\n  };\n  const handleSearch = async query => {\n    if (!query.trim()) {\n      setSearchResults([]);\n      setShowSearchResults(false);\n      return;\n    }\n    setSearchLoading(true);\n    setShowSearchResults(true);\n    try {\n      // Search for users by username or full name\n      const {\n        data: users,\n        error\n      } = await supabase.from('profiles').select('id, username, full_name, avatar_url, is_public_profile').eq('is_public_profile', true).or(`username.ilike.%${query}%,full_name.ilike.%${query}%`).limit(10);\n      if (error) {\n        console.error('Error searching users:', error);\n        setSearchResults([]);\n        return;\n      }\n      setSearchResults(users || []);\n    } catch (error) {\n      console.error('Error searching users:', error);\n      setSearchResults([]);\n    } finally {\n      setSearchLoading(false);\n    }\n  };\n  const handleSearchInputChange = e => {\n    const query = e.target.value;\n    setSearchQuery(query);\n\n    // Debounce search\n    const timeoutId = setTimeout(() => {\n      handleSearch(query);\n    }, 300);\n    return () => clearTimeout(timeoutId);\n  };\n  const handleUserSelect = selectedUser => {\n    const username = getUsernameForUrl({\n      id: selectedUser.id\n    }, selectedUser);\n    navigate(`/user/${username}`);\n    setShowSearchResults(false);\n    setSearchQuery('');\n  };\n  const handleSearchSubmit = e => {\n    e.preventDefault();\n    if (searchResults.length > 0) {\n      handleUserSelect(searchResults[0]);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"nav\", {\n      className: \"navigation\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"nav-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"nav-brand\",\n          onClick: () => navigate('/'),\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"brand-icon\",\n            children: \"\\uD83C\\uDF73\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"brand-text\",\n            children: \"Recipe App\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"nav-menu\",\n          children: user ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"user-menu\",\n            ref: menuRef,\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"user-button\",\n              onClick: () => setMenuOpen(!menuOpen),\n              \"aria-expanded\": menuOpen,\n              \"aria-haspopup\": \"true\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"user-avatar\",\n                children: userProfile !== null && userProfile !== void 0 && userProfile.avatar_url ? /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: userProfile.avatar_url,\n                  alt: \"Profile\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 190,\n                  columnNumber: 23\n                }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: getAvatarInitials()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 192,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 188,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"user-name\",\n                children: getDisplayName()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 195,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"dropdown-arrow\",\n                children: \"\\u25BC\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 196,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 182,\n              columnNumber: 17\n            }, this), menuOpen && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"dropdown-menu\",\n              role: \"menu\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"dropdown-item\",\n                onClick: () => {\n                  navigate('/');\n                  setMenuOpen(false);\n                },\n                role: \"menuitem\",\n                children: \"Home\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 201,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n                className: \"dropdown-divider\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 208,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"dropdown-item\",\n                onClick: () => {\n                  navigate('/profile');\n                  setMenuOpen(false);\n                },\n                role: \"menuitem\",\n                children: \"Profile\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 209,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"dropdown-item\",\n                onClick: () => {\n                  const username = getUsernameForUrl(user, userProfile);\n                  navigate(generateMyRecipesUrl(username));\n                  setMenuOpen(false);\n                },\n                role: \"menuitem\",\n                children: \"My recipes\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 216,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"dropdown-item\",\n                onClick: () => {\n                  navigate('/saved-recipes');\n                  setMenuOpen(false);\n                },\n                role: \"menuitem\",\n                children: \"Saved recipes\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 227,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"dropdown-item\",\n                onClick: () => {\n                  const username = getUsernameForUrl(user, userProfile);\n                  navigate(`/${username}/create-recipe`);\n                  setMenuOpen(false);\n                },\n                role: \"menuitem\",\n                children: \"Create recipe\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 234,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n                className: \"dropdown-divider\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 245,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"dropdown-item\",\n                onClick: handleSignOut,\n                role: \"menuitem\",\n                children: \"Sign out\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 246,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 200,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"sign-in-button\",\n            onClick: () => setShowAuth(true),\n            children: \"Sign in\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 257,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 7\n    }, this), showAuth && /*#__PURE__*/_jsxDEV(Auth, {\n      onClose: () => setShowAuth(false),\n      onSuccess: () => setShowAuth(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n}\n_s(Navigation, \"4tmIFzOvwS8XYmf98w1YBTEhHUg=\", false, function () {\n  return [useNavigate];\n});\n_c = Navigation;\nexport default Navigation;\nvar _c;\n$RefreshReg$(_c, \"Navigation\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useNavigate","supabase","Auth","generateMyRecipesUrl","getUsernameForUrl","jsxDEV","_jsxDEV","Fragment","_Fragment","Navigation","_s","user","setUser","userProfile","setUserProfile","showAuth","setShowAuth","menuOpen","setMenuOpen","searchQuery","setSearchQuery","searchResults","setSearchResults","showSearchResults","setShowSearchResults","searchLoading","setSearchLoading","menuRef","searchRef","navigate","auth","getSession","then","data","session","_session$user","fetchUserProfile","id","subscription","onAuthStateChange","event","_session$user2","openAuthHandler","window","addEventListener","unsubscribe","removeEventListener","handleClickOutside","e","current","contains","target","document","userId","error","from","select","eq","single","code","console","handleSignOut","signOut","getDisplayName","full_name","username","email","getAvatarInitials","name","parts","split","length","toUpperCase","substring","handleSearch","query","trim","users","or","limit","handleSearchInputChange","value","timeoutId","setTimeout","clearTimeout","handleUserSelect","selectedUser","handleSearchSubmit","preventDefault","children","className","onClick","fileName","_jsxFileName","lineNumber","columnNumber","ref","avatar_url","src","alt","role","onClose","onSuccess","_c","$RefreshReg$"],"sources":["/Users/habeebsait/Apps/food_app/web/src/components/Navigation.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { supabase } from '../supabaseClient';\nimport Auth from './Auth';\nimport { generateMyRecipesUrl, getUsernameForUrl } from '../utils/urlUtils';\nimport './Navigation.css';\n\nfunction Navigation() {\n  const [user, setUser] = useState(null);\n  const [userProfile, setUserProfile] = useState(null);\n  const [showAuth, setShowAuth] = useState(false);\n  const [menuOpen, setMenuOpen] = useState(false);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [searchResults, setSearchResults] = useState([]);\n  const [showSearchResults, setShowSearchResults] = useState(false);\n  const [searchLoading, setSearchLoading] = useState(false);\n  const menuRef = useRef(null);\n  const searchRef = useRef(null);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    // Get initial session\n    supabase.auth.getSession().then(({ data: { session } }) => {\n      setUser(session?.user ?? null);\n      if (session?.user) {\n        fetchUserProfile(session.user.id);\n      }\n    });\n\n    // Listen for auth changes\n    const { data: { subscription } } = supabase.auth.onAuthStateChange(\n      (event, session) => {\n        setUser(session?.user ?? null);\n        if (session?.user) {\n          fetchUserProfile(session.user.id);\n        } else {\n          setUserProfile(null);\n        }\n      }\n    );\n\n    // Listen for global event to open auth modal (triggered from HomePage)\n    const openAuthHandler = () => setShowAuth(true);\n    window.addEventListener('openAuth', openAuthHandler);\n\n    return () => {\n      subscription?.unsubscribe();\n      window.removeEventListener('openAuth', openAuthHandler);\n    };\n  }, []);\n\n  // Close menu and search results on outside click\n  useEffect(() => {\n    function handleClickOutside(e) {\n      if (menuRef.current && !menuRef.current.contains(e.target)) {\n        setMenuOpen(false);\n      }\n      if (searchRef.current && !searchRef.current.contains(e.target)) {\n        setShowSearchResults(false);\n      }\n    }\n    if (menuOpen || showSearchResults) {\n      document.addEventListener('mousedown', handleClickOutside);\n    }\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, [menuOpen, showSearchResults]);\n\n  const fetchUserProfile = async (userId) => {\n    try {\n      const { data, error } = await supabase\n        .from('profiles')\n        .select('username, full_name, avatar_url')\n        .eq('id', userId)\n        .single();\n      \n      if (error && error.code !== 'PGRST116') {\n        console.error('Error fetching profile:', error);\n        return;\n      }\n      \n      setUserProfile(data);\n    } catch (error) {\n      console.error('Error fetching profile:', error);\n    }\n  };\n\n  const handleSignOut = async () => {\n    try {\n      await supabase.auth.signOut();\n      setMenuOpen(false);\n      navigate('/');\n    } catch (error) {\n      console.error('Error signing out:', error);\n    }\n  };\n\n  const getDisplayName = () => {\n    return userProfile?.full_name || userProfile?.username || user?.email || 'User';\n  };\n\n  const getAvatarInitials = () => {\n    const name = getDisplayName();\n    const parts = name.split(' ');\n    if (parts.length >= 2) {\n      return (parts[0][0] + parts[1][0]).toUpperCase();\n    }\n    return name.substring(0, 2).toUpperCase();\n  };\n\n  const handleSearch = async (query) => {\n    if (!query.trim()) {\n      setSearchResults([]);\n      setShowSearchResults(false);\n      return;\n    }\n\n    setSearchLoading(true);\n    setShowSearchResults(true);\n\n    try {\n      // Search for users by username or full name\n      const { data: users, error } = await supabase\n        .from('profiles')\n        .select('id, username, full_name, avatar_url, is_public_profile')\n        .eq('is_public_profile', true)\n        .or(`username.ilike.%${query}%,full_name.ilike.%${query}%`)\n        .limit(10);\n\n      if (error) {\n        console.error('Error searching users:', error);\n        setSearchResults([]);\n        return;\n      }\n\n      setSearchResults(users || []);\n    } catch (error) {\n      console.error('Error searching users:', error);\n      setSearchResults([]);\n    } finally {\n      setSearchLoading(false);\n    }\n  };\n\n  const handleSearchInputChange = (e) => {\n    const query = e.target.value;\n    setSearchQuery(query);\n    \n    // Debounce search\n    const timeoutId = setTimeout(() => {\n      handleSearch(query);\n    }, 300);\n\n    return () => clearTimeout(timeoutId);\n  };\n\n  const handleUserSelect = (selectedUser) => {\n    const username = getUsernameForUrl({ id: selectedUser.id }, selectedUser);\n    navigate(`/user/${username}`);\n    setShowSearchResults(false);\n    setSearchQuery('');\n  };\n\n  const handleSearchSubmit = (e) => {\n    e.preventDefault();\n    if (searchResults.length > 0) {\n      handleUserSelect(searchResults[0]);\n    }\n  };\n\n  return (\n    <>\n      <nav className=\"navigation\">\n        <div className=\"nav-container\">\n          <div className=\"nav-brand\" onClick={() => navigate('/')}>\n            <span className=\"brand-icon\">🍳</span>\n            <span className=\"brand-text\">Recipe App</span>\n          </div>\n\n          <div className=\"nav-menu\">\n            {user ? (\n              <div className=\"user-menu\" ref={menuRef}>\n                <button\n                  className=\"user-button\"\n                  onClick={() => setMenuOpen(!menuOpen)}\n                  aria-expanded={menuOpen}\n                  aria-haspopup=\"true\"\n                >\n                  <div className=\"user-avatar\">\n                    {userProfile?.avatar_url ? (\n                      <img src={userProfile.avatar_url} alt=\"Profile\" />\n                    ) : (\n                      <span>{getAvatarInitials()}</span>\n                    )}\n                  </div>\n                  <span className=\"user-name\">{getDisplayName()}</span>\n                  <span className=\"dropdown-arrow\">▼</span>\n                </button>\n\n                {menuOpen && (\n                  <div className=\"dropdown-menu\" role=\"menu\">\n                    <button\n                      className=\"dropdown-item\"\n                      onClick={() => { navigate('/'); setMenuOpen(false); }}\n                      role=\"menuitem\"\n                    >\n                      Home\n                    </button>\n                    <hr className=\"dropdown-divider\" />\n                    <button\n                      className=\"dropdown-item\"\n                      onClick={() => { navigate('/profile'); setMenuOpen(false); }}\n                      role=\"menuitem\"\n                    >\n                      Profile\n                    </button>\n                    <button\n                      className=\"dropdown-item\"\n                      onClick={() => { \n                        const username = getUsernameForUrl(user, userProfile);\n                        navigate(generateMyRecipesUrl(username)); \n                        setMenuOpen(false); \n                      }}\n                      role=\"menuitem\"\n                    >\n                      My recipes\n                    </button>\n                    <button\n                      className=\"dropdown-item\"\n                      onClick={() => { navigate('/saved-recipes'); setMenuOpen(false); }}\n                      role=\"menuitem\"\n                    >\n                      Saved recipes\n                    </button>\n                    <button\n                      className=\"dropdown-item\"\n                      onClick={() => { \n                        const username = getUsernameForUrl(user, userProfile);\n                        navigate(`/${username}/create-recipe`); \n                        setMenuOpen(false); \n                      }}\n                      role=\"menuitem\"\n                    >\n                      Create recipe\n                    </button>\n                    <hr className=\"dropdown-divider\" />\n                    <button\n                      className=\"dropdown-item\"\n                      onClick={handleSignOut}\n                      role=\"menuitem\"\n                    >\n                      Sign out\n                    </button>\n                  </div>\n                )}\n              </div>\n            ) : (\n              <button\n                className=\"sign-in-button\"\n                onClick={() => setShowAuth(true)}\n              >\n                Sign in\n              </button>\n            )}\n          </div>\n        </div>\n      </nav>\n\n      {showAuth && (\n        <Auth \n          onClose={() => setShowAuth(false)}\n          onSuccess={() => setShowAuth(false)}\n        />\n      )}\n    </>\n  );\n}\n\nexport default Navigation;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AAC1D,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,SAASC,QAAQ,QAAQ,mBAAmB;AAC5C,OAAOC,IAAI,MAAM,QAAQ;AACzB,SAASC,oBAAoB,EAAEC,iBAAiB,QAAQ,mBAAmB;AAC3E,OAAO,kBAAkB;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAE1B,SAASC,UAAUA,CAAA,EAAG;EAAAC,EAAA;EACpB,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGf,QAAQ,CAAC,IAAI,CAAC;EACtC,MAAM,CAACgB,WAAW,EAAEC,cAAc,CAAC,GAAGjB,QAAQ,CAAC,IAAI,CAAC;EACpD,MAAM,CAACkB,QAAQ,EAAEC,WAAW,CAAC,GAAGnB,QAAQ,CAAC,KAAK,CAAC;EAC/C,MAAM,CAACoB,QAAQ,EAAEC,WAAW,CAAC,GAAGrB,QAAQ,CAAC,KAAK,CAAC;EAC/C,MAAM,CAACsB,WAAW,EAAEC,cAAc,CAAC,GAAGvB,QAAQ,CAAC,EAAE,CAAC;EAClD,MAAM,CAACwB,aAAa,EAAEC,gBAAgB,CAAC,GAAGzB,QAAQ,CAAC,EAAE,CAAC;EACtD,MAAM,CAAC0B,iBAAiB,EAAEC,oBAAoB,CAAC,GAAG3B,QAAQ,CAAC,KAAK,CAAC;EACjE,MAAM,CAAC4B,aAAa,EAAEC,gBAAgB,CAAC,GAAG7B,QAAQ,CAAC,KAAK,CAAC;EACzD,MAAM8B,OAAO,GAAG5B,MAAM,CAAC,IAAI,CAAC;EAC5B,MAAM6B,SAAS,GAAG7B,MAAM,CAAC,IAAI,CAAC;EAC9B,MAAM8B,QAAQ,GAAG7B,WAAW,CAAC,CAAC;EAE9BF,SAAS,CAAC,MAAM;IACd;IACAG,QAAQ,CAAC6B,IAAI,CAACC,UAAU,CAAC,CAAC,CAACC,IAAI,CAAC,CAAC;MAAEC,IAAI,EAAE;QAAEC;MAAQ;IAAE,CAAC,KAAK;MAAA,IAAAC,aAAA;MACzDvB,OAAO,EAAAuB,aAAA,GAACD,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEvB,IAAI,cAAAwB,aAAA,cAAAA,aAAA,GAAI,IAAI,CAAC;MAC9B,IAAID,OAAO,aAAPA,OAAO,eAAPA,OAAO,CAAEvB,IAAI,EAAE;QACjByB,gBAAgB,CAACF,OAAO,CAACvB,IAAI,CAAC0B,EAAE,CAAC;MACnC;IACF,CAAC,CAAC;;IAEF;IACA,MAAM;MAAEJ,IAAI,EAAE;QAAEK;MAAa;IAAE,CAAC,GAAGrC,QAAQ,CAAC6B,IAAI,CAACS,iBAAiB,CAChE,CAACC,KAAK,EAAEN,OAAO,KAAK;MAAA,IAAAO,cAAA;MAClB7B,OAAO,EAAA6B,cAAA,GAACP,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEvB,IAAI,cAAA8B,cAAA,cAAAA,cAAA,GAAI,IAAI,CAAC;MAC9B,IAAIP,OAAO,aAAPA,OAAO,eAAPA,OAAO,CAAEvB,IAAI,EAAE;QACjByB,gBAAgB,CAACF,OAAO,CAACvB,IAAI,CAAC0B,EAAE,CAAC;MACnC,CAAC,MAAM;QACLvB,cAAc,CAAC,IAAI,CAAC;MACtB;IACF,CACF,CAAC;;IAED;IACA,MAAM4B,eAAe,GAAGA,CAAA,KAAM1B,WAAW,CAAC,IAAI,CAAC;IAC/C2B,MAAM,CAACC,gBAAgB,CAAC,UAAU,EAAEF,eAAe,CAAC;IAEpD,OAAO,MAAM;MACXJ,YAAY,aAAZA,YAAY,uBAAZA,YAAY,CAAEO,WAAW,CAAC,CAAC;MAC3BF,MAAM,CAACG,mBAAmB,CAAC,UAAU,EAAEJ,eAAe,CAAC;IACzD,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;;EAEN;EACA5C,SAAS,CAAC,MAAM;IACd,SAASiD,kBAAkBA,CAACC,CAAC,EAAE;MAC7B,IAAIrB,OAAO,CAACsB,OAAO,IAAI,CAACtB,OAAO,CAACsB,OAAO,CAACC,QAAQ,CAACF,CAAC,CAACG,MAAM,CAAC,EAAE;QAC1DjC,WAAW,CAAC,KAAK,CAAC;MACpB;MACA,IAAIU,SAAS,CAACqB,OAAO,IAAI,CAACrB,SAAS,CAACqB,OAAO,CAACC,QAAQ,CAACF,CAAC,CAACG,MAAM,CAAC,EAAE;QAC9D3B,oBAAoB,CAAC,KAAK,CAAC;MAC7B;IACF;IACA,IAAIP,QAAQ,IAAIM,iBAAiB,EAAE;MACjC6B,QAAQ,CAACR,gBAAgB,CAAC,WAAW,EAAEG,kBAAkB,CAAC;IAC5D;IACA,OAAO,MAAMK,QAAQ,CAACN,mBAAmB,CAAC,WAAW,EAAEC,kBAAkB,CAAC;EAC5E,CAAC,EAAE,CAAC9B,QAAQ,EAAEM,iBAAiB,CAAC,CAAC;EAEjC,MAAMa,gBAAgB,GAAG,MAAOiB,MAAM,IAAK;IACzC,IAAI;MACF,MAAM;QAAEpB,IAAI;QAAEqB;MAAM,CAAC,GAAG,MAAMrD,QAAQ,CACnCsD,IAAI,CAAC,UAAU,CAAC,CAChBC,MAAM,CAAC,iCAAiC,CAAC,CACzCC,EAAE,CAAC,IAAI,EAAEJ,MAAM,CAAC,CAChBK,MAAM,CAAC,CAAC;MAEX,IAAIJ,KAAK,IAAIA,KAAK,CAACK,IAAI,KAAK,UAAU,EAAE;QACtCC,OAAO,CAACN,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;QAC/C;MACF;MAEAxC,cAAc,CAACmB,IAAI,CAAC;IACtB,CAAC,CAAC,OAAOqB,KAAK,EAAE;MACdM,OAAO,CAACN,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;IACjD;EACF,CAAC;EAED,MAAMO,aAAa,GAAG,MAAAA,CAAA,KAAY;IAChC,IAAI;MACF,MAAM5D,QAAQ,CAAC6B,IAAI,CAACgC,OAAO,CAAC,CAAC;MAC7B5C,WAAW,CAAC,KAAK,CAAC;MAClBW,QAAQ,CAAC,GAAG,CAAC;IACf,CAAC,CAAC,OAAOyB,KAAK,EAAE;MACdM,OAAO,CAACN,KAAK,CAAC,oBAAoB,EAAEA,KAAK,CAAC;IAC5C;EACF,CAAC;EAED,MAAMS,cAAc,GAAGA,CAAA,KAAM;IAC3B,OAAO,CAAAlD,WAAW,aAAXA,WAAW,uBAAXA,WAAW,CAAEmD,SAAS,MAAInD,WAAW,aAAXA,WAAW,uBAAXA,WAAW,CAAEoD,QAAQ,MAAItD,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEuD,KAAK,KAAI,MAAM;EACjF,CAAC;EAED,MAAMC,iBAAiB,GAAGA,CAAA,KAAM;IAC9B,MAAMC,IAAI,GAAGL,cAAc,CAAC,CAAC;IAC7B,MAAMM,KAAK,GAAGD,IAAI,CAACE,KAAK,CAAC,GAAG,CAAC;IAC7B,IAAID,KAAK,CAACE,MAAM,IAAI,CAAC,EAAE;MACrB,OAAO,CAACF,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAGA,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEG,WAAW,CAAC,CAAC;IAClD;IACA,OAAOJ,IAAI,CAACK,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,CAACD,WAAW,CAAC,CAAC;EAC3C,CAAC;EAED,MAAME,YAAY,GAAG,MAAOC,KAAK,IAAK;IACpC,IAAI,CAACA,KAAK,CAACC,IAAI,CAAC,CAAC,EAAE;MACjBtD,gBAAgB,CAAC,EAAE,CAAC;MACpBE,oBAAoB,CAAC,KAAK,CAAC;MAC3B;IACF;IAEAE,gBAAgB,CAAC,IAAI,CAAC;IACtBF,oBAAoB,CAAC,IAAI,CAAC;IAE1B,IAAI;MACF;MACA,MAAM;QAAES,IAAI,EAAE4C,KAAK;QAAEvB;MAAM,CAAC,GAAG,MAAMrD,QAAQ,CAC1CsD,IAAI,CAAC,UAAU,CAAC,CAChBC,MAAM,CAAC,wDAAwD,CAAC,CAChEC,EAAE,CAAC,mBAAmB,EAAE,IAAI,CAAC,CAC7BqB,EAAE,CAAC,mBAAmBH,KAAK,sBAAsBA,KAAK,GAAG,CAAC,CAC1DI,KAAK,CAAC,EAAE,CAAC;MAEZ,IAAIzB,KAAK,EAAE;QACTM,OAAO,CAACN,KAAK,CAAC,wBAAwB,EAAEA,KAAK,CAAC;QAC9ChC,gBAAgB,CAAC,EAAE,CAAC;QACpB;MACF;MAEAA,gBAAgB,CAACuD,KAAK,IAAI,EAAE,CAAC;IAC/B,CAAC,CAAC,OAAOvB,KAAK,EAAE;MACdM,OAAO,CAACN,KAAK,CAAC,wBAAwB,EAAEA,KAAK,CAAC;MAC9ChC,gBAAgB,CAAC,EAAE,CAAC;IACtB,CAAC,SAAS;MACRI,gBAAgB,CAAC,KAAK,CAAC;IACzB;EACF,CAAC;EAED,MAAMsD,uBAAuB,GAAIhC,CAAC,IAAK;IACrC,MAAM2B,KAAK,GAAG3B,CAAC,CAACG,MAAM,CAAC8B,KAAK;IAC5B7D,cAAc,CAACuD,KAAK,CAAC;;IAErB;IACA,MAAMO,SAAS,GAAGC,UAAU,CAAC,MAAM;MACjCT,YAAY,CAACC,KAAK,CAAC;IACrB,CAAC,EAAE,GAAG,CAAC;IAEP,OAAO,MAAMS,YAAY,CAACF,SAAS,CAAC;EACtC,CAAC;EAED,MAAMG,gBAAgB,GAAIC,YAAY,IAAK;IACzC,MAAMrB,QAAQ,GAAG7D,iBAAiB,CAAC;MAAEiC,EAAE,EAAEiD,YAAY,CAACjD;IAAG,CAAC,EAAEiD,YAAY,CAAC;IACzEzD,QAAQ,CAAC,SAASoC,QAAQ,EAAE,CAAC;IAC7BzC,oBAAoB,CAAC,KAAK,CAAC;IAC3BJ,cAAc,CAAC,EAAE,CAAC;EACpB,CAAC;EAED,MAAMmE,kBAAkB,GAAIvC,CAAC,IAAK;IAChCA,CAAC,CAACwC,cAAc,CAAC,CAAC;IAClB,IAAInE,aAAa,CAACkD,MAAM,GAAG,CAAC,EAAE;MAC5Bc,gBAAgB,CAAChE,aAAa,CAAC,CAAC,CAAC,CAAC;IACpC;EACF,CAAC;EAED,oBACEf,OAAA,CAAAE,SAAA;IAAAiF,QAAA,gBACEnF,OAAA;MAAKoF,SAAS,EAAC,YAAY;MAAAD,QAAA,eACzBnF,OAAA;QAAKoF,SAAS,EAAC,eAAe;QAAAD,QAAA,gBAC5BnF,OAAA;UAAKoF,SAAS,EAAC,WAAW;UAACC,OAAO,EAAEA,CAAA,KAAM9D,QAAQ,CAAC,GAAG,CAAE;UAAA4D,QAAA,gBACtDnF,OAAA;YAAMoF,SAAS,EAAC,YAAY;YAAAD,QAAA,EAAC;UAAE;YAAAG,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,eACtCzF,OAAA;YAAMoF,SAAS,EAAC,YAAY;YAAAD,QAAA,EAAC;UAAU;YAAAG,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC3C,CAAC,eAENzF,OAAA;UAAKoF,SAAS,EAAC,UAAU;UAAAD,QAAA,EACtB9E,IAAI,gBACHL,OAAA;YAAKoF,SAAS,EAAC,WAAW;YAACM,GAAG,EAAErE,OAAQ;YAAA8D,QAAA,gBACtCnF,OAAA;cACEoF,SAAS,EAAC,aAAa;cACvBC,OAAO,EAAEA,CAAA,KAAMzE,WAAW,CAAC,CAACD,QAAQ,CAAE;cACtC,iBAAeA,QAAS;cACxB,iBAAc,MAAM;cAAAwE,QAAA,gBAEpBnF,OAAA;gBAAKoF,SAAS,EAAC,aAAa;gBAAAD,QAAA,EACzB5E,WAAW,aAAXA,WAAW,eAAXA,WAAW,CAAEoF,UAAU,gBACtB3F,OAAA;kBAAK4F,GAAG,EAAErF,WAAW,CAACoF,UAAW;kBAACE,GAAG,EAAC;gBAAS;kBAAAP,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAC,gBAElDzF,OAAA;kBAAAmF,QAAA,EAAOtB,iBAAiB,CAAC;gBAAC;kBAAAyB,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO;cAClC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACE,CAAC,eACNzF,OAAA;gBAAMoF,SAAS,EAAC,WAAW;gBAAAD,QAAA,EAAE1B,cAAc,CAAC;cAAC;gBAAA6B,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAO,CAAC,eACrDzF,OAAA;gBAAMoF,SAAS,EAAC,gBAAgB;gBAAAD,QAAA,EAAC;cAAC;gBAAAG,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAM,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACnC,CAAC,EAER9E,QAAQ,iBACPX,OAAA;cAAKoF,SAAS,EAAC,eAAe;cAACU,IAAI,EAAC,MAAM;cAAAX,QAAA,gBACxCnF,OAAA;gBACEoF,SAAS,EAAC,eAAe;gBACzBC,OAAO,EAAEA,CAAA,KAAM;kBAAE9D,QAAQ,CAAC,GAAG,CAAC;kBAAEX,WAAW,CAAC,KAAK,CAAC;gBAAE,CAAE;gBACtDkF,IAAI,EAAC,UAAU;gBAAAX,QAAA,EAChB;cAED;gBAAAG,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC,eACTzF,OAAA;gBAAIoF,SAAS,EAAC;cAAkB;gBAAAE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC,eACnCzF,OAAA;gBACEoF,SAAS,EAAC,eAAe;gBACzBC,OAAO,EAAEA,CAAA,KAAM;kBAAE9D,QAAQ,CAAC,UAAU,CAAC;kBAAEX,WAAW,CAAC,KAAK,CAAC;gBAAE,CAAE;gBAC7DkF,IAAI,EAAC,UAAU;gBAAAX,QAAA,EAChB;cAED;gBAAAG,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC,eACTzF,OAAA;gBACEoF,SAAS,EAAC,eAAe;gBACzBC,OAAO,EAAEA,CAAA,KAAM;kBACb,MAAM1B,QAAQ,GAAG7D,iBAAiB,CAACO,IAAI,EAAEE,WAAW,CAAC;kBACrDgB,QAAQ,CAAC1B,oBAAoB,CAAC8D,QAAQ,CAAC,CAAC;kBACxC/C,WAAW,CAAC,KAAK,CAAC;gBACpB,CAAE;gBACFkF,IAAI,EAAC,UAAU;gBAAAX,QAAA,EAChB;cAED;gBAAAG,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC,eACTzF,OAAA;gBACEoF,SAAS,EAAC,eAAe;gBACzBC,OAAO,EAAEA,CAAA,KAAM;kBAAE9D,QAAQ,CAAC,gBAAgB,CAAC;kBAAEX,WAAW,CAAC,KAAK,CAAC;gBAAE,CAAE;gBACnEkF,IAAI,EAAC,UAAU;gBAAAX,QAAA,EAChB;cAED;gBAAAG,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC,eACTzF,OAAA;gBACEoF,SAAS,EAAC,eAAe;gBACzBC,OAAO,EAAEA,CAAA,KAAM;kBACb,MAAM1B,QAAQ,GAAG7D,iBAAiB,CAACO,IAAI,EAAEE,WAAW,CAAC;kBACrDgB,QAAQ,CAAC,IAAIoC,QAAQ,gBAAgB,CAAC;kBACtC/C,WAAW,CAAC,KAAK,CAAC;gBACpB,CAAE;gBACFkF,IAAI,EAAC,UAAU;gBAAAX,QAAA,EAChB;cAED;gBAAAG,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC,eACTzF,OAAA;gBAAIoF,SAAS,EAAC;cAAkB;gBAAAE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC,eACnCzF,OAAA;gBACEoF,SAAS,EAAC,eAAe;gBACzBC,OAAO,EAAE9B,aAAc;gBACvBuC,IAAI,EAAC,UAAU;gBAAAX,QAAA,EAChB;cAED;gBAAAG,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACN,CACN;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACE,CAAC,gBAENzF,OAAA;YACEoF,SAAS,EAAC,gBAAgB;YAC1BC,OAAO,EAAEA,CAAA,KAAM3E,WAAW,CAAC,IAAI,CAAE;YAAAyE,QAAA,EAClC;UAED;YAAAG,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ;QACT;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACE,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC,EAELhF,QAAQ,iBACPT,OAAA,CAACJ,IAAI;MACHmG,OAAO,EAAEA,CAAA,KAAMrF,WAAW,CAAC,KAAK,CAAE;MAClCsF,SAAS,EAAEA,CAAA,KAAMtF,WAAW,CAAC,KAAK;IAAE;MAAA4E,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACrC,CACF;EAAA,eACD,CAAC;AAEP;AAACrF,EAAA,CA5QQD,UAAU;EAAA,QAWAT,WAAW;AAAA;AAAAuG,EAAA,GAXrB9F,UAAU;AA8QnB,eAAeA,UAAU;AAAC,IAAA8F,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}